@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<DMXForGamers.Models.Main>

@Code
    Layout = Nothing
End Code

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>DMX For Gamers Remote Control</title>
</head>
<body>
    <table>
        <tr>
            <td>Remote Port:</td>
            <td>@Model.RemotePort</td>
        </tr>
    </table>

    @*++/*@

    @foreach (var item in Model.Events)
    {
        <div>
            <form id="@item.EventIDNoSpaces">
                <input id="eventID" type="hidden" name="EventID" value="@item.EventID" />
                <button type="button" onclick="postjs()">@item.EventID</button>
            </form>
        </div>
    }
    <script src="@Url.Content("/Contents/jquery-2.2.4.min.js")" type="text/javascript"></script>
    <script type="text/javascript">
        function postjs() {
            alert("hello world" + $("#eventID").val());
            var xhr = new XMLHttpRequest();
            var data = { FirstName: $("#firstnamepost").val(), LastName: $("#lastnamepost").val() };
            xhr.open("POST", "/persons", true);
            xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
            xhr.send(JSON.stringify(data));
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    $("#result").append("<li>" + xhr.responseText + "</li>");
                };
            }
        }
    </script>
</body>
</html>